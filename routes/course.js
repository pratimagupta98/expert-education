const express = require("express");
const router = express.Router();
const { body, validationResult } = require("express-validator");
const { check } = require("express-validator");
const { verifyToken } = require("../functions/stafftoken");
const multer = require("multer");
const {} = require("multer");
const fs = require("fs");

if (!fs.existsSync("./uploads")) {
  fs.mkdirSync("./uploads");
}
const fileBuffer = fs.readFileSync('foo.jpg')
  const base64Image =fileBuffer.toString('base64')
  console.log("image",base64Image) 

  const input =`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`

  const imageBuffer = new Buffer.from(input,'base64')
  fs.writeFileSync('./uploads/fo.jpg',imageBuffer)
const storage = multer.diskStorage({
  destination: function (req, file, cb) {
    cb(null, "./uploads");
  },
  filename: function (req, file, cb) {
    const uniqueSuffix = Date.now() + "-" + Math.round(Math.random() * 1e9);
    cb(null, file.fieldname + "-" + uniqueSuffix);
  },
});
const upload = multer({ storage: storage });
//let multipleUpload = upload.fields([{ name: "course_image", maxCount: 1 }]);

const {
  addcourse,
  addcoursebyadmin,
  editcourse,
  viewonecourse,
  viewonecoursep,
  mycourses,
  allcourse,
  allcoursebyrecent,
  deletecourse,
  countcourse,
  //coursebytitle,
  updatecourse,
  coursebytitle,
  allcoursefree,
  searchcourse,
  editcoursebystaff,
 } = require("../controllers/course");

//Paths
router.post(
  "/admin/addcourse",
  verifyToken,
  upload.fields([
    {
      name: "course_image",
    },

    {
      name: "posterimg",
    },
  ]),
  addcourse
);

router.post(
  "/admin/addcoursebyadmin",
  upload.fields([
    {
      name: "course_image",
    },
    {
      name: "posterimg",
    },
  ]),
  addcoursebyadmin
);
router.post(
  "/admin/editcourse/:id",
  upload.fields([
    {
      name: "course_image",
    },
    {
      name: "posterimg",
    },
  ]),
  editcourse
);
router.post(
  "/user/editcoursebystaff/:id",
  upload.fields([
    {
      name: "course_image",
    },
    {
      name: "posterimg",
    },
  ]),
  verifyToken,
  editcoursebystaff
);
router.get("/admin/viewonecourse/:id", verifyToken, viewonecourse);
router.get("/admin/viewonecoursep/:id", viewonecoursep);
router.get("/admin/allcourse", allcourse);
router.get("/admin/mycourses", verifyToken, mycourses);
router.get("/admin/allcoursebyrecent", allcoursebyrecent);
router.get("/admin/deletecourse/:id", deletecourse);
router.get("/user/countcourse", verifyToken, countcourse);
//router.get("/admin/coursebytitle/:id", coursebytitle);
router.post("/user/updatecourse/:id", updatecourse);
router.get("/admin/coursebytitle/:id", coursebytitle);
router.get("/user/allcoursefree", allcoursefree);
 
router.post("/user/searchcourse", searchcourse);
module.exports = router;
 